
database = {'badWeather', 'baseline', 'cameraJitter','dynamicBackground',...
    'intermittentObjectMotion', 'lowFramerate','nightVideos','shadow', 'thermal',...
    'turbulence'};
db = {'blizzard','skating','snowFall','wetSnow','NA','NA';...
'highway','office','pedestrians','PETS2006','NA','NA';
'badminton','boulevard','sidewalk','traffic','NA','NA';...
'boats','canoe','fall','fountain01','fountain02','overpass';...
'abandonedBox','parking','sofa','streetLight','tramstop','winterDriveway';...
'port_0_17fps','tramCrossroad_1fps','tunnelExit_0_35fps','turnpike_0_5fps','NA','NA';...
'bridgeEntry','busyBoulvard','fluidHighway','streetCornerAtNight','tramStation','winterStreet';...
'backdoor','bungalows','busStation','copyMachine','cubicle','peopleInShade';...
'corridor','diningRoom','lakeSide','library','park','NA';...
'turbulence0','turbulence1','turbulence2','turbulence3','NA','NA'};

idxTo_Values = {'3949', '2349', '3649', '1999', 'NA','NA';...
'1700', '2050', '1099', '1200', 'NA','NA';...
'1150', '2500', '1200', '1570','NA','NA';...
'7999', '1189', '4000', '1184', '1499', '3000';...
'4500', '2500', '2750', '3200', '3200', '2500';...
'1999', '649', '2999', '1149','NA','NA';...
'1749', '1744', '881', '2999', '1749', '1339';...
'2000', '1700', '1250', '3400', '7400', '1199';...
'5400', '3700', '6500', '4900', '600', 'NA';...
'2999', '2599', '2499', '1499', 'NA','NA'};
% write propoer values
idxfrom_Values = {'1500', '750', '1400', '725', 'NA','NA';...
'591', '716', '375', '426', 'NA','NA';...
'151', '831', '176', '311','NA','NA';...
'3025', '170', '1476', '368','475', '976';...
'1001', '676', '1101', '1488', '916', '726';...
'475', '100', '475', '150','NA','NA';...
'350', '483', '216', '1075', '600', '195';...
'776', '676', '451', '1426', '3126', '450';...
'2426', '1476', '2726', '2126', '151', 'NA';...
'975', '675', '975', '325', 'NA','NA'};
startepoch=60;
endepoch=90;%52
Cat_video_arr = [4,4,4,6,6,4,6,6,5,4];

for epoch = startepoch:endepoch
    epoch
    catwise_results = zeros(11,2);
    for hh=1:10        
        F_Score_arr=zeros(Cat_video_arr(hh),1);
        for jj=1:Cat_video_arr(hh)
            S_dB = database(hh);
            
            videoPath = cell2mat(strcat('/home/cvprlab0/murari/background-subtraction/dataset2014/dataset/',S_dB,'/'));
            binaryFolder= cell2mat(strcat('/home/cvprlab0/murari/background-subtraction/dataset2014/2dcd_results/',S_dB,'/'));

            if epoch<10
                foldername =  strcat('e00',num2str(epoch));
            elseif epoch<100
                foldername =  strcat('e0',num2str(epoch));
            else
                foldername =  strcat('e',num2str(epoch));
            end
                sub_dB = cell2mat(db(hh,jj));
                videoPath2 = strcat(videoPath, sub_dB,'/');
                binaryFolder2 = strcat(binaryFolder,sub_dB,'/');
                idxTo_val = idxTo_Values(hh,jj);
                idxfrom_val = idxfrom_Values(hh,jj);
                binaryFolder3 = strcat(binaryFolder2,'/','predicted_loop','/',foldername);
                confusionMatrix = processVideoFolder3(videoPath2, binaryFolder3,idxTo_val,idxfrom_val);
                Precision = confusionMatrix(1)/(confusionMatrix(1)+confusionMatrix(2));
                %disp('Recall:');
                Recall = confusionMatrix(1)/(confusionMatrix(1)+confusionMatrix(3));
                %disp('Fscore:');
                F_Score = (2*Precision*Recall)/(Precision+Recall);
                F_Score_arr(jj,1) = F_Score;
                %disp('PWC:');
                %PWC = 100*(confusionMatrix(2)+confusionMatrix(3))/(confusionMatrix(1)+confusionMatrix(2)+confusionMatrix(3)+confusionMatrix(4));
        end
        avg_catwise=mean(F_Score_arr);
        catwise_results(hh,1)= hh;
        catwise_results(hh,2)= avg_catwise;
    end
    avg_all = mean(catwise_results(1:10,2))
    catwise_results(11,1)=11;
    catwise_results(11,2)=avg_all;
    filename = strcat('epoch', num2str(epoch),'_category_avg_all_50p_50p_test');
    fileID2 = fopen(strcat(filename,'.txt'),'w');
    fprintf(fileID2,'%d %1.4f\r\n',catwise_results');
    fclose(fileID2);
end
